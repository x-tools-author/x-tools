name: build-test
on:
  workflow_dispatch: # Enables manually

env:
  GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}

jobs:
  build-linux:
    name: Build with Qt5(linux)
    runs-on: windows-latest
    steps:
      - name: Pull code
        uses: actions/checkout@v4
      - name: Setup cmake
        uses: jwlawson/actions-setup-cmake@v2
        with:
          cmake-version: '4.1.x'
      - name: Use cmake
        run: cmake --version
      - name: Build for Windows
        shell: cmd
        run: |
          git fetch --tags
          scripts\ci-build-windows-xp.bat
      - name: Upload Release Asset for Windnows
        shell: cmd
        run: |
          for %%f in (bin\5.6.3\Windows\Release\xTools-zip\*.zip) do gh release upload continuous "%%f" --clobber

