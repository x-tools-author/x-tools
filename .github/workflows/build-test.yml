name: build-test
on:
  workflow_dispatch: # Enables manually

env:
  GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}

jobs:
  build-linux:
    name: Build with Qt
    runs-on: windows-latest
    steps:
      - name: Pull code
        uses: actions/checkout@v4
      - name: Setup cmake
        uses: jwlawson/actions-setup-cmake@v2
        with:
          cmake-version: '4.1.x'
      - name: Use cmake
        run: cmake --version
      - name: Build for Windows
        uses: ./.github/actions/building-for-windows
        with:
          qt_version: '6.8.3'
          qt_modules: 'qtcharts qtserialbus qtserialport qtwebsockets'
      - name: Build for Windows 7
        uses: ./.github/actions/building-for-windows7
      - name: Build for Windows XP
        uses: ./.github/actions/building-for-windowsxp

